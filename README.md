<p align="center">
  <img src="assets/logo/r9stack-logo-clear.png" alt="r9stack" width="200" />
</p>

<p align="center">
  A CLI that scaffolds opinionated SaaS projects with a fully functional walking skeletonâ€”a complete frontend, backend, and database stack with auth pre-integrated.
</p>

## Status

ðŸš€ **v0.4.0 Released** - Now with Flight Rules and GitHub integration!

| Feature | Status |
|---------|--------|
| TanStack Start + React 19 | âœ… Working |
| Starter-based architecture | âœ… Working |
| shadcn/ui + Tailwind CSS | âœ… Working |
| Convex backend | âœ… Working |
| WorkOS auth | âœ… Working |
| Flight Rules docs | âœ… Working |
| GitHub repo creation | âœ… Working |
| Vercel deployment | ðŸ“‹ Planned |
| Stripe payments | ðŸ“‹ Post-V1 |

## Why r9stack?

Agentic coding has dramatically accelerated feature development, but initial project setupâ€”configuring the frontend framework, wiring up the backend and database, integrating auth providersâ€”remains tedious and error-prone.

r9stack eliminates this friction. Run a single command and have a scaffolded full-stack project in minutes.

## Architecture

r9stack uses TanStack Start's [starter system](docs/tanstack-start-starter-system.md) to create projects:

1. **CLI invokes TanStack Start** with a `--starter` flag pointing to a hosted `starter.json`
2. **TanStack Start creates the project** and applies r9stack customizations
3. **CLI guides post-creation setup** for Convex, WorkOS, and optional GitHub/Vercel integration

## Tech Stack

| Layer | Technology | Description |
|-------|------------|-------------|
| Framework | TanStack Start | Full-stack React framework with SSR and server functions |
| UI Library | React 19 | Declarative UI with the latest React features |
| Language | TypeScript | Type-safe JavaScript for reliable code |
| Styling | Tailwind CSS 4 | Utility-first CSS framework |
| Build | Vite | Lightning-fast build tool and dev server |
| Backend | Convex | Real-time backend with automatic sync |
| Auth | WorkOS AuthKit | Enterprise-ready SSO and MFA |
| Sessions | iron-session | Encrypted cookie-based sessions |
| Components | shadcn/ui | Beautiful, accessible Radix-based components |

## Getting Started

### From npm (once published)

```bash
# Install globally
npm install -g r9stack

# Or run directly with npx
npx r9stack init my-project
```

### Local Development

```bash
# Clone the repository
git clone https://github.com/ryanpacker/r9stack.git
cd r9stack

# Install dependencies and build
npm install
npm run build

# Link globally for testing
npm link

# Create a new project
r9stack init my-project
```

## Usage

```bash
# Interactive mode - prompts for project name and options
r9stack init

# Provide project name directly
r9stack init my-awesome-app

# Non-interactive with defaults (installs Flight Rules, skips GitHub)
r9stack init my-awesome-app --yes

# Create with GitHub repo
r9stack init my-awesome-app --yes --github

# Create public GitHub repo
r9stack init my-awesome-app --github --public

# Skip Flight Rules installation
r9stack init my-awesome-app --no-flight-rules

# Use a specific starter
r9stack init my-awesome-app --starter standard

# List available starters
r9stack --starter-list

# View help
r9stack init --help
```

### CLI Options

| Flag | Description |
|------|-------------|
| `-y, --yes` | Skip confirmation prompts |
| `-s, --starter <id>` | Use a specific starter (e.g., 'standard') |
| `--no-flight-rules` | Skip Flight Rules installation |
| `--github` | Create GitHub repository |
| `--no-github` | Skip GitHub repository creation |
| `--private` | Make GitHub repository private (default) |
| `--public` | Make GitHub repository public |

The CLI will:
1. Fetch the latest starter template from GitHub
2. Create your project using TanStack Start
3. Replace project name placeholders in generated files
4. Install [Flight Rules](https://github.com/ryanpacker/flight-rules) documentation framework
5. Optionally create a GitHub repository and push initial commit
6. Guide you through post-creation setup (Convex, WorkOS)

## What Gets Generated (V1 Target)

Running `r9stack init` will create a project with:

```
my-project/
â”œâ”€â”€ .flight-rules/          # Flight Rules documentation framework
â”‚   â”œâ”€â”€ AGENTS.md           # Agent guidelines
â”‚   â”œâ”€â”€ commands/           # Coding session workflows
â”‚   â””â”€â”€ doc-templates/      # Documentation templates
â”œâ”€â”€ convex/
â”‚   â”œâ”€â”€ _generated/         # Auto-generated by Convex
â”‚   â”œâ”€â”€ schema.ts           # Database schema
â”‚   â””â”€â”€ messages.ts         # Demo Convex functions
â”œâ”€â”€ public/
â”‚   â””â”€â”€ images/             # App logos and assets
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/             # shadcn components
â”‚   â”‚   â”œâ”€â”€ AppShell.tsx    # Application shell
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx     # Collapsible sidebar
â”‚   â”‚   â”œâ”€â”€ NavGroup.tsx    # Navigation group
â”‚   â”‚   â”œâ”€â”€ NavItem.tsx     # Navigation item
â”‚   â”‚   â””â”€â”€ UserMenu.tsx    # Auth-aware user menu
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ auth.ts         # Auth types
â”‚   â”‚   â”œâ”€â”€ auth-client.ts  # Client-side auth context
â”‚   â”‚   â”œâ”€â”€ auth-server.ts  # Server-side auth (iron-session)
â”‚   â”‚   â””â”€â”€ utils.ts        # Utilities (cn helper)
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ __root.tsx      # Root layout with providers
â”‚   â”‚   â”œâ”€â”€ index.tsx       # Public landing page
â”‚   â”‚   â”œâ”€â”€ auth/           # Auth flow routes
â”‚   â”‚   â”‚   â”œâ”€â”€ sign-in.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ callback.tsx
â”‚   â”‚   â”‚   â””â”€â”€ sign-out.tsx
â”‚   â”‚   â””â”€â”€ app/            # Protected routes
â”‚   â”‚       â”œâ”€â”€ route.tsx   # Auth guard + AppShell
â”‚   â”‚       â”œâ”€â”€ index.tsx   # Authenticated home
â”‚   â”‚       â””â”€â”€ demo/       # Demo pages
â”‚   â””â”€â”€ styles.css          # Tailwind + shadcn styles
â”œâ”€â”€ .env.example
â”œâ”€â”€ components.json         # shadcn configuration
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

### Route Structure

- `/` â€” Public landing page
- `/auth/*` â€” Authentication flow (sign-in, callback, sign-out)
- `/app/*` â€” Protected routes (requires authentication)

## Manual Setup Required

After scaffolding, you'll need to:

1. **Set up WorkOS** â€” Create account at https://workos.com, configure redirect URI
2. **Set up Convex** â€” Run `npx convex dev` to create project and authenticate
3. **Add environment variables** â€” Copy `.env.example` to `.env.local` and fill in credentials

## Project Structure

```
r9stack/
â”œâ”€â”€ src/                    # CLI source code
â”œâ”€â”€ starters/
â”‚   â””â”€â”€ standard/           # r9-starter-standard source
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ e2e/               # End-to-end tests
â”‚   â””â”€â”€ output/            # Test output (gitignored)
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ prd.md             # Product requirements
â”‚   â”œâ”€â”€ implementation/    # Implementation specs
â”‚   â””â”€â”€ ...
â””â”€â”€ dist/                  # Compiled CLI
```

## Documentation

- [Product Requirements](docs/prd.md)
- [TanStack Starter System](docs/tanstack-start-starter-system.md)
- [Starter Development Guide](docs/starter-development.md)
- [Tech Stack](docs/tech-stack.md)

## License

Apache 2.0 - See [LICENSE](LICENSE) for details.
